<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Boat - Sequoia Boat Rentals</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" href="https://img.icons8.com/fluency/48/null/canoe-slalom.png">
</head>
<body>
    <!-- Header Component -->
    <header-component></header-component>

    <main class="booking-page">
        <!-- Hero Banner -->
        <div class="page-hero">
            <div class="page-hero-image">
                <img src="https://images.unsplash.com/photo-1472107263350-a98e8b508deb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&h=600&q=80" alt="Book your boat adventure" class="hero-bg">
            </div>
            <div class="page-hero-overlay"></div>
            <div class="container">
                <div class="page-hero-content" data-aos="fade-up">
                    <h1>Book Your Adventure</h1>
                    <p>Reserve your eco-friendly inflatable boat today and explore the beautiful lakes around Kamloops.</p>
                </div>
            </div>
        </div>

        <div class="container">
            <section class="booking-process-section" data-aos="fade-up">
                <div class="section-header text-center">
                    <h2 class="section-title">How It Works</h2>
                    <p class="section-subtitle">Simple steps to get you on the water</p>
                </div>
                
                <div class="booking-steps">
                    <div class="step-progress-bar">
                        <div class="progress-line"></div>
                    </div>
                    <ol class="steps-list">
                        <li data-aos="fade-up" data-aos-delay="100">
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <h3><i class="fas fa-map-marked-alt"></i> Choose Your Lake</h3>
                                <p>Select from our serviced lakes around Kamloops.</p>
                            </div>
                        </li>
                        <li data-aos="fade-up" data-aos-delay="200">
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <h3><i class="fas fa-ship"></i> Select Boat & Duration</h3>
                                <p>Pick your boat type and rental duration.</p>
                            </div>
                        </li>
                        <li data-aos="fade-up" data-aos-delay="300">
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <h3><i class="fas fa-plus-circle"></i> Add Optional Extras</h3>
                                <p>Enhance your experience with our add-ons.</p>
                            </div>
                        </li>
                        <li data-aos="fade-up" data-aos-delay="400">
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <h3><i class="fas fa-id-card"></i> Confirm Boating License</h3>
                                <p>Verify license or select driver option.</p>
                            </div>
                        </li>
                        <li data-aos="fade-up" data-aos-delay="500">
                            <span class="step-number">5</span>
                            <div class="step-content">
                                <h3><i class="fas fa-check-circle"></i> Complete Your Booking</h3>
                                <p>Finalize details and confirm your adventure.</p>
                            </div>
                        </li>
                    </ol>
                </div>
            </section>
            
            <section class="booking-form-section" data-aos="fade-up">
                <div class="booking-container">
                    <div class="booking-form-wrapper" data-aos="fade-up" data-aos-delay="100">
                        <div class="form-header">
                            <h2>Reserve Your Boat</h2>
                            <p>All fields marked with * are required</p>
                        </div>
                        <!-- Booking Form Component -->
                        <booking-form-component full-form="true"></booking-form-component>
                    </div>
                    
                    <div class="booking-sidebar" data-aos="fade-up" data-aos-delay="200">
                        <div class="booking-summary-card">
                            <div class="summary-header">
                                <h3><i class="fas fa-receipt"></i> Booking Summary</h3>
                            </div>
                            <div class="summary-content">
                                <div id="booking-summary">
                                    <p class="summary-placeholder">Your booking details will appear here as you make selections.</p>
                                </div>
                                <div class="price-estimate">
                                    <div class="price-label">Estimated Total:</div>
                                    <div class="price-value" id="price-estimate">$0.00</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="popular-lakes-card animate-water-wave">
                            <h3>Popular Lakes</h3>
                            <ul class="popular-lakes-list">
                                <li>
                                    <a href="booking.html?lake=heffley-lake">Heffley Lake <span class="tag">Free Delivery</span></a>
                                </li>
                                <li>
                                    <a href="booking.html?lake=paul-lake">Paul Lake <span class="tag">Free Delivery</span></a>
                                </li>
                                <li>
                                    <a href="booking.html?lake=kamloops-lake">Kamloops Lake <span class="tag">Free Delivery</span></a>
                                </li>
                                <li>
                                    <a href="booking.html?lake=shuswap-lake">Shuswap Lake <span class="tag">Most Popular</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="booking-faq-section" data-aos="fade-up" id="faq">
                <div class="section-header text-center">
                    <h2 class="section-title">Frequently Asked Questions</h2>
                    <p class="section-subtitle">Everything you need to know about booking with us</p>
                </div>
                
                <div class="faq-container">
                    <div class="faq-item" data-aos="fade-up" data-aos-delay="100">
                        <div class="faq-question">
                            <h3><i class="fas fa-life-ring"></i> What if I don't have a boating license?</h3>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>No problem! We offer two solutions: we can assist you in obtaining a temporary boating license, or you can hire one of our drivers for $25/hour. Our drivers are experienced and knowledgeable about all local lakes.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-aos="fade-up" data-aos-delay="150">
                        <div class="faq-question">
                            <h3><i class="fas fa-truck"></i> Is delivery included?</h3>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>We offer free delivery to Heffley Lake, Paul Lake, and Kamloops Lake. For other locations, there's a delivery fee of $50 per 100 km from Kamloops. We'll handle all the transportation logistics so you can focus on enjoying your day on the water.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-aos="fade-up" data-aos-delay="200">
                        <div class="faq-question">
                            <h3><i class="fas fa-box-open"></i> What's included in the rental?</h3>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>All rentals include the inflatable boat, electric motor, battery, life jackets, paddles, anchor, and basic safety equipment. You can add extras like coolers, speakers, and dry bags for an additional fee. We ensure all equipment is cleaned and sanitized between uses.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-aos="fade-up" data-aos-delay="250">
                        <div class="faq-question">
                            <h3><i class="fas fa-calendar-times"></i> What's your cancellation policy?</h3>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>Cancellations made 48 hours or more before your scheduled rental receive a full refund. Cancellations within 48 hours will receive a 50% refund. In case of severe weather conditions, we offer rescheduling at no additional cost.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" data-aos="fade-up" data-aos-delay="300">
                        <div class="faq-question">
                            <h3><i class="fas fa-cloud-rain"></i> What happens if there's bad weather?</h3>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>Safety is our priority. If weather conditions make boating unsafe, we'll contact you to reschedule your booking at no additional cost. For light rain or overcast conditions, rentals typically proceed as planned unless you prefer to reschedule.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="cta-section" data-aos="fade-up">
                <div class="cta-content text-center">
                    <h2>Need Help With Your Booking?</h2>
                    <p>Our team is ready to assist you with any questions.</p>
                    <a href="contact.html" class="btn btn-primary btn-large animate-button-pulse">Contact Us</a>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Component -->
    <footer-component></footer-component>

    <!-- Main JavaScript -->
    <script src="js/main.js"></script>
    
    <!-- Web Components -->
    <script src="components/header.js"></script>
    <script src="components/booking-form.js"></script>
    <script src="components/footer.js"></script>
    
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize AOS animations
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
            
            // FAQ accordion functionality
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                const answer = item.querySelector('.faq-answer');
                const toggle = item.querySelector('.faq-toggle');
                
                question.addEventListener('click', () => {
                    const isOpen = item.classList.contains('active');
                    
                    // Close all items
                    faqItems.forEach(otherItem => {
                        otherItem.classList.remove('active');
                        otherItem.querySelector('.faq-answer').style.maxHeight = null;
                        otherItem.querySelector('.faq-toggle i').className = 'fas fa-chevron-down';
                    });
                    
                    // Open clicked item if it was closed
                    if (!isOpen) {
                        item.classList.add('active');
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        toggle.querySelector('i').className = 'fas fa-chevron-up';
                    }
                });
            });
            
            // Booking summary update with enhanced animations
            function updateBookingSummary() {
                const lake = document.querySelector('#lake')?.value;
                const boatType = document.querySelector('#boatType')?.value;
                const duration = document.querySelector('#duration')?.value;
                const date = document.querySelector('#date')?.value;
                
                if (!lake && !boatType && !duration && !date) {
                    return;
                }
                
                let summaryHTML = '';
                let estimatePrice = 0;
                
                if (lake) {
                    summaryHTML += `<div class="summary-item animate-fade-in">
                        <span class="summary-label">Lake:</span>
                        <span class="summary-value">${lake.charAt(0).toUpperCase() + lake.slice(1).replace('-', ' ')}</span>
                    </div>`;
                }
                
                if (boatType) {
                    summaryHTML += `<div class="summary-item animate-fade-in">
                        <span class="summary-label">Boat:</span>
                        <span class="summary-value">${boatType === 'small' ? 'Small (1-2 Person)' : 'Family (3-4 Person)'}</span>
                    </div>`;
                    
                    // Add base price based on boat type
                    estimatePrice += boatType === 'small' ? 180 : 240;
                }
                
                if (duration) {
                    summaryHTML += `<div class="summary-item animate-fade-in">
                        <span class="summary-label">Duration:</span>
                        <span class="summary-value">${duration === 'half-day' ? 'Half Day (4 hours)' : 
                                               duration === 'full-day' ? 'Full Day (8 hours)' : 'Custom'}</span>
                    </div>`;
                    
                    // Adjust price for duration
                    if (duration === 'full-day') {
                        estimatePrice *= 1.75; // 75% more for full day
                    } else if (duration === 'custom') {
                        const hours = document.querySelector('#customHours')?.value || 4;
                        summaryHTML += `<div class="summary-item animate-fade-in">
                            <span class="summary-label">Hours:</span>
                            <span class="summary-value">${hours}</span>
                        </div>`;
                        
                        // Custom pricing based on hours
                        estimatePrice = (boatType === 'small' ? 45 : 60) * hours;
                    }
                }
                
                if (date) {
                    const formattedDate = new Date(date).toLocaleDateString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    summaryHTML += `<div class="summary-item animate-fade-in">
                        <span class="summary-label">Date:</span>
                        <span class="summary-value">${formattedDate}</span>
                    </div>`;
                    
                    // Weekend pricing (Friday-Sunday)
                    const dayOfWeek = new Date(date).getDay();
                    if (dayOfWeek === 0 || dayOfWeek === 5 || dayOfWeek === 6) { // Friday, Saturday, Sunday
                        estimatePrice *= 1.15; // 15% more for weekends
                        summaryHTML += `<div class="summary-item animate-fade-in">
                            <span class="summary-label">Note:</span>
                            <span class="summary-value weekend-rate">Weekend rates applied <i class="fas fa-info-circle" title="15% premium applies to Friday, Saturday, and Sunday bookings"></i></span>
                        </div>`;
                    }
                }
                
                // Add-ons
                const addons = document.querySelectorAll('input[name="addons"]:checked');
                if (addons.length > 0) {
                    summaryHTML += `<div class="summary-item animate-fade-in">
                        <span class="summary-label">Add-ons:</span>
                        <span class="summary-value">`;
                    
                    addons.forEach(addon => {
                        const addonValue = addon.value;
                        let addonPrice = 0;
                        let addonName = '';
                        let addonIcon = '';
                        
                        switch(addonValue) {
                            case 'cooler':
                                addonPrice = 30;
                                addonName = 'Cooler';
                                addonIcon = '<i class="fas fa-cube"></i>';
                                break;
                            case 'speaker':
                                addonPrice = 20;
                                addonName = 'Bluetooth Speaker';
                                addonIcon = '<i class="fas fa-volume-up"></i>';
                                break;
                            case 'drybag':
                                addonPrice = 10;
                                addonName = 'Dry Bag';
                                addonIcon = '<i class="fas fa-shield-alt"></i>';
                                break;
                        }
                        
                        estimatePrice += addonPrice;
                        summaryHTML += `${addonIcon} ${addonName} <span class="addon-price">(+$${addonPrice})</span><br>`;
                    });
                    
                    summaryHTML += `</span></div>`;
                }
                
                // Delivery
                if (lake) {
                    const freeDeliveryLakes = ['heffley-lake', 'paul-lake', 'kamloops-lake'];
                    let deliveryFee = 0;
                    
                    if (!freeDeliveryLakes.includes(lake)) {
                        // Estimate delivery fee based on distance
                        switch(lake) {
                            case 'shuswap-lake':
                                deliveryFee = 50;
                                break;
                            case 'monte-lake':
                                deliveryFee = 30;
                                break;
                            case 'lac-le-jeune':
                                deliveryFee = 25;
                                break;
                            default:
                                deliveryFee = 0;
                        }
                        
                        estimatePrice += deliveryFee;
                        
                        summaryHTML += `<div class="summary-item animate-fade-in">
                            <span class="summary-label">Delivery:</span>
                            <span class="summary-value">$${deliveryFee} <i class="fas fa-truck"></i></span>
                        </div>`;
                    } else {
                        summaryHTML += `<div class="summary-item animate-fade-in">
                            <span class="summary-label">Delivery:</span>
                            <span class="summary-value free-tag">Free <i class="fas fa-check-circle"></i></span>
                        </div>`;
                    }
                }
                
                const summaryElement = document.getElementById('booking-summary');
                const priceElement = document.getElementById('price-estimate');
                
                if (summaryElement) {
                    summaryElement.innerHTML = summaryHTML;
                }
                
                if (priceElement) {
                    priceElement.textContent = `$${Math.round(estimatePrice)}`;
                    // Add animation if price changes
                    priceElement.classList.add('price-updated');
                    setTimeout(() => {
                        priceElement.classList.remove('price-updated');
                    }, 1000);
                }
            }
            
            // Initial update and event listeners
            updateBookingSummary();
            
            const formInputs = document.querySelectorAll('#lake, #boatType, #duration, #date, #customHours, input[name="addons"]');
            formInputs.forEach(input => {
                input.addEventListener('change', updateBookingSummary);
            });

            // Check URL parameters to pre-fill form
            const urlParams = new URLSearchParams(window.location.search);
            const lakeParam = urlParams.get('lake');
            if (lakeParam) {
                const lakeSelect = document.querySelector('#lake');
                if (lakeSelect) {
                    lakeSelect.value = lakeParam;
                    lakeSelect.dispatchEvent(new Event('change'));
                }
            }
        });
    </script>
</body>
</html>
